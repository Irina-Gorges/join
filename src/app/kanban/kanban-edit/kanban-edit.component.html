<section class="dimmed-background">
    <div class="overlay-kanban-edit">
        <div class="close-button">
            <img src="assets/img/add-contacts/Vector.svg"  alt="" />
        </div>
        <div class="testzwecken">
            <button class="prev" (click)="prevTask()">Prev</button>
            <button class="next" (click)="nextTask()">Next</button>
        </div>
        <div class="overlay-content-wrapper">
            <div class="content-in-overlay">
                <form class="kanban-overlay-form">
                    <div class="form-title kanban-div">
                        <span>Title</span>
                        <input [ngModel]="dummyTasks[currentIndex].title" name="taskTitle" placeholder="Enter a title" type="text">
                    </div>
                    <div class="form-description kanban-div">
                        <span>Description</span>
                        <textarea
                            [ngModel]="dummyTasks[currentIndex].description" name="taskDescription"
                            placeholder="Enter a Description "
                        ></textarea>
                    </div>
                    <div class="form-date kanban-div">
                        <span>Due date</span>
                        <input type="date" [ngModel]="dummyTasks[currentIndex].dueDate" name="taskDate"
                        />
                    </div>
                </form>

                <div class="kanban-edit-overlay-priority">
                    <p>Priority</p>
                    <div class="prioity-buttons">

                        <button (click)="changeToUrgent()" [disabled]="dummyTasks[currentIndex].priority === 'Urgent'"  [class.active-urgent]="dummyTasks[currentIndex].priority === 'Urgent'">
                            <span>Urgent</span>
                            @if(dummyTasks[currentIndex].priority !== 'Urgent'){
                                <img src="assets/img/kanban-edit-overlay/urgent-arrow.svg"alt=""/>
                            }@else {
                                <img src="assets/img/kanban-edit-overlay/white-urgent.svg"alt=""/>
                            }
                        </button>

                        <button (click)="changeToMedium()" [disabled]="dummyTasks[currentIndex].priority === 'Medium'"   [class.active-medium]="dummyTasks[currentIndex].priority === 'Medium'">
                            <span>Medium</span>
                            @if(dummyTasks[currentIndex].priority !== 'Medium'){
                                <img src="assets/img/kanban-edit-overlay/medium-arrow.svg"alt=""/>
                            }@else {
                                <img src="assets/img/kanban-edit-overlay/white-medium.svg"alt=""/>
                            }
                        </button>

                        <button (click)="changeToLow()" [disabled]="dummyTasks[currentIndex].priority === 'Low'" [class.active-low]="dummyTasks[currentIndex].priority === 'Low'">
                            <span>Low</span>
                            @if(dummyTasks[currentIndex].priority !== 'Low'){
                                <img src="assets/img/kanban-edit-overlay/low-arrow.svg" alt=""/>
                            }@else{
                                <img src="assets/img/kanban-edit-overlay/white-low.svg" alt=""/>
                            }
                        </button>

                    </div>
                </div>

                <div class="kanban-assigned-to">
                    <span class="assigned-span">Assigned to</span>
                    <div class="all-user-container">
                        <select class="select-to-assign" required name="name" id="">
                            <option value="1">hallo</option>
                            <option value="2">haallo</option>
                            <option value="3">haaallo</option>
                            <option value="4">haaaallo</option>
                        </select>
                    </div>
                </div>

                <div class="kanban-overlay-subtask">
                    <span>Subtask</span>
                    <div class="subtaskfield">
                        <input [(ngModel)]="subtaskString" type="text"(focus)="isInputFocused = true" (blur)="isInputFocused = false">
                        @if(!isInputFocused){
                            <div class="add">
                                <img src="assets/img/kanban-edit-overlay/plus-zichen.svg" alt=""/>
                            </div>
                        }@else {
                            <div class="submit-cancel">
                                <button (click)="emptySubtask(); debug()">
                                    <img  src="assets/img/kanban-edit-overlay/exit-subtask.svg" alt="">
                                </button>
                                
                                <div class="grey-line"></div>
                                <button (click)="pushToSubtask(); debug()">
                                    <img  src="assets/img/kanban-edit-overlay/checkmark-subtask.svg" alt="">
                                </button>
                            </div>
                        }
                    </div>
                    <div class="each-sub-task">
                        @for (item of dummyTasks[currentIndex].subTask; track $index) {
                            <li>{{ dummyTasks[currentIndex].subTask[$index]}}</li>
                        }
                    </div>
                </div>
            </div>
            <div class="confirm-edit-button">
                <button>
                    <span>Ok</span>
                    <img src="assets/img/add-contacts/check.svg" alt="" />
                </button>
            </div>
        </div>
    </div>
</section>
